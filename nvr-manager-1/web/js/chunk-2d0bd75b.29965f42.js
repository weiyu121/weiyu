(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd75b"],{"2ba6":function(a,t,e){"use strict";e.r(t);var r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-spin",{attrs:{spinning:a.spinning,tip:"Loading..."}},[e("a-form-model",{ref:"form",attrs:{model:a.form.val,rules:a.form.rules,"label-col":a.form.labelCol,"wrapper-col":a.form.wrapperCol}},[e("a-form-model-item",{attrs:{label:"选择AI服务",prop:"ai_project_id"}},[e("a-select",{attrs:{"show-search":"",placeholder:"请选择"},on:{change:a.changeServer},model:{value:a.form.val.ai_project_id,callback:function(t){a.$set(a.form.val,"ai_project_id",t)},expression:"form.val.ai_project_id"}},a._l(a.serverList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.id}},[a._v(a._s(t.name))])})),1)],1),a.isArr?a._l(a.propKeys,(function(t,r){return e("div",{key:t},[e("a-divider",{staticStyle:{"font-size":"large","font-weight":"bold"},attrs:{orientation:"left"}},[a._v(a._s(t))]),a._l(a.propertys[r][t],(function(t,r){return e("a-form-model-item",{key:r,attrs:{prop:t.id}},[e("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(t.name)+" "),e("a-tooltip",{attrs:{title:t.help}},[e("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),t.switch?e("a-switch",{model:{value:a.form.val.ai_task_args[t.id],callback:function(e){a.$set(a.form.val.ai_task_args,t.id,e)},expression:"form.val.ai_task_args[pro.id]"}}):t.int_range?e("a-input-number",{staticStyle:{width:"120px"},attrs:{min:t.int_range.min,max:t.int_range.max,precision:0,placeholder:t.int_range.min+"~"+t.int_range.max+"的整数"},model:{value:a.form.val.ai_task_args[t.id],callback:function(e){a.$set(a.form.val.ai_task_args,t.id,e)},expression:"form.val.ai_task_args[pro.id]"}}):t.float_range?e("a-input-number",{staticStyle:{width:"120px"},attrs:{min:t.float_range.min,max:t.float_range.max,placeholder:t.float_range.min+"~"+t.float_range.max+"的数字"},model:{value:a.form.val.ai_task_args[t.id],callback:function(e){a.$set(a.form.val.ai_task_args,t.id,e)},expression:"form.val.ai_task_args[pro.id]"}}):t.choices&&t.choices.length?e("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",allowClear:""},model:{value:a.form.val.ai_task_args[t.id],callback:function(e){a.$set(a.form.val.ai_task_args,t.id,e)},expression:"form.val.ai_task_args[pro.id]"}},a._l(t.choices,(function(t){return e("a-select-option",{key:t,attrs:{value:t}},[a._v(" "+a._s(t)+" ")])})),1):t.muti_choices&&t.muti_choices.length?e("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择",allowClear:""},model:{value:a.form.val.ai_task_args[t.id],callback:function(e){a.$set(a.form.val.ai_task_args,t.id,e)},expression:"form.val.ai_task_args[pro.id]"}},a._l(t.muti_choices,(function(t){return e("a-select-option",{key:t,attrs:{value:t}},[a._v(" "+a._s(t)+" ")])})),1):e("a-input",{attrs:{placeholder:"请输入"},model:{value:a.form.val.ai_task_args[t.id],callback:function(e){a.$set(a.form.val.ai_task_args,t.id,e)},expression:"form.val.ai_task_args[pro.id]"}})],1)}))],2)})):a._l(a.propertys,(function(t,r){return e("a-form-model-item",{key:r,attrs:{prop:r}},[e("span",{attrs:{slot:"label"},slot:"label"},[a._v(" "+a._s(t.name)+" "),e("a-tooltip",{attrs:{title:t.help}},[e("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),t.switch?e("a-switch",{model:{value:a.form.val.ai_task_args[r],callback:function(t){a.$set(a.form.val.ai_task_args,r,t)},expression:"form.val.ai_task_args[proKey]"}}):t.int_range?e("a-input-number",{staticStyle:{width:"120px"},attrs:{min:t.int_range.min,max:t.int_range.max,precision:0,placeholder:t.int_range.min+"~"+t.int_range.max+"的整数"},model:{value:a.form.val.ai_task_args[r],callback:function(t){a.$set(a.form.val.ai_task_args,r,t)},expression:"form.val.ai_task_args[proKey]"}}):t.float_range?e("a-input-number",{staticStyle:{width:"120px"},attrs:{min:t.float_range.min,max:t.float_range.max,placeholder:t.float_range.min+"~"+t.float_range.max+"的数字"},model:{value:a.form.val.ai_task_args[r],callback:function(t){a.$set(a.form.val.ai_task_args,r,t)},expression:"form.val.ai_task_args[proKey]"}}):t.choices&&t.choices.length?e("a-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",allowClear:""},model:{value:a.form.val.ai_task_args[r],callback:function(t){a.$set(a.form.val.ai_task_args,r,t)},expression:"form.val.ai_task_args[proKey]"}},a._l(t.choices,(function(t){return e("a-select-option",{key:t,attrs:{value:t}},[a._v(" "+a._s(t)+" ")])})),1):t.muti_choices&&t.muti_choices.length?e("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请选择",allowClear:""},model:{value:a.form.val.ai_task_args[r],callback:function(t){a.$set(a.form.val.ai_task_args,r,t)},expression:"form.val.ai_task_args[proKey]"}},a._l(t.muti_choices,(function(t){return e("a-select-option",{key:t,attrs:{value:t}},[a._v(" "+a._s(t)+" ")])})),1):e("a-input",{attrs:{placeholder:"请输入"},model:{value:a.form.val.ai_task_args[r],callback:function(t){a.$set(a.form.val.ai_task_args,r,t)},expression:"form.val.ai_task_args[proKey]"}})],1)}))],2)],1),e("a-form-item",{staticClass:"form-btn"},[e("a-button",{on:{click:function(t){return a.closeDetail(!1)}}},[a._v("取消")]),e("a-button",{attrs:{type:"primary",loading:a.form.confirmLoading},on:{click:function(t){return a.onSubmit("form")}}},[a._v("确定")])],1)],1)},i=[],s=e("f3f3"),n=e("c964"),o=(e("96cf"),e("d3b7"),e("d81d"),e("b64b"),e("52bb")),l={props:{currentInfo:{type:Object,required:!0}},data:function(){return{spinning:!1,form:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}},confirmLoading:!1,val:{ai_task_args:{}},rules:{ai_project_id:[{required:!0,message:"不可为空",trigger:"change"}]}},orgin_ai_task_id:0,orgin_ai_task_args:{},serverList:[],device_id:0,hasEvent:!1,propertys:{},isArr:!1,propKeys:[]}},watch:{"currentInfo.id":{handler:"resetForm",immediate:!0}},created:function(){this.getServes()},methods:{getServes:function(){var a=this;Object(o["k"])().then((function(t){a.serverList=t.ai_project_list||[]}))},changeServer:function(a){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.spinning=!0,a===t.orgin_ai_task_id){e.next=11;break}return e.next=4,Object(o["n"])({id:t.device_id}).then((function(a){var e=a.alert||[];e.length>0&&(t.hasEvent=!0,t.$message.warning("当前设备存在".concat(e.length,"个告警事件，请先删除告警事件")))}));case 4:if(!t.hasEvent){e.next=8;break}return t.form.val.ai_project_id=t.orgin_ai_task_id,t.spinning=!1,e.abrupt("return");case 8:t.form.val.ai_task_args={},e.next=12;break;case 11:t.form.val.ai_task_args=t.orgin_ai_task_args;case 12:Object(o["j"])({id:a}).then((function(a){t.propertys=a.optional_args||{},t.isArr=t.propertys instanceof Array,t.isArr&&(t.propKeys=t.propertys.map((function(a){return Object.keys(a)[0]})))}))["finally"]((function(){t.spinning=!1}));case 13:case"end":return e.stop()}}),e)})))()},resetForm:function(a){var t=this;a&&(this.form.confirmLoading=!1,this.$nextTick((function(){t.$refs.form.clearValidate()})),this.form.val={ai_task_args:{}},this.propertys={},this.isArr=!1,this.propKeys=[],this.device_id=a,this.getInfo(a))},getInfo:function(a){var t=this;this.spinning=!0,Object(o["e"])({id:a}).then((function(a){var e=a||{},r=e.ai_project_id,i=e.ai_task_args;t.orgin_ai_task_args=i||{},t.orgin_ai_task_id=r,null!=r&&(t.form.val={ai_project_id:r,ai_task_args:i||{}},Object(o["j"])({id:r}).then((function(a){t.propertys=a.optional_args||[],t.isArr=t.propertys instanceof Array,t.isArr&&(t.propKeys=t.propertys.map((function(a){return Object.keys(a)[0]})))}))["finally"]((function(){t.spinning=!1})))}))["finally"]((function(){t.spinning=!1}))},closeDetail:function(a){this.form.confirmLoading=!1,this.$emit("emitToParent",a)},onSubmit:function(a){var t=this;this.$refs[a].validate((function(a){if(a){t.form.confirmLoading=!0;var e=t.currentInfo.id,r=Object(s["a"])({},t.form.val);r.id=e,t.updateInfo(o["r"],r)}}))},updateInfo:function(a,t){var e=this;a(t).then((function(){e.$message.success("数据提交成功！"),e.closeDetail(!0)}))["finally"]((function(){e.form.confirmLoading=!1}))}}},c=l,_=e("2877"),f=Object(_["a"])(c,r,i,!1,null,null,null);t["default"]=f.exports}}]);