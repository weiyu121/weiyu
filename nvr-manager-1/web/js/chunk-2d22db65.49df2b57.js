(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22db65"],{f951:function(e,n,r){"use strict";r.r(n);var a=function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("div",[r("a-spin",{attrs:{spinning:e.spinning,tip:"Loading..."}},[r("a-form-model",{ref:"form",attrs:{model:e.form.val,rules:e.form.rules,"label-col":e.form.labelCol,"wrapper-col":e.form.wrapperCol}},[r("a-form-model-item",{attrs:{label:"名称"}},[r("a-input",{model:{value:e.form.val.name,callback:function(n){e.$set(e.form.val,"name",n)},expression:"form.val.name"}})],1),r("a-form-model-item",{attrs:{label:"通道编号",prop:"nvr_channel"}},[r("a-input",{attrs:{disabled:!e.currentInfo.isAdd},model:{value:e.form.val.nvr_channel,callback:function(n){e.$set(e.form.val,"nvr_channel",n)},expression:"form.val.nvr_channel"}})],1),r("a-form-model-item",{attrs:{label:"码流类型"}},[r("a-select",{attrs:{"show-search":"",placeholder:"请选择"},model:{value:e.form.val.stream,callback:function(n){e.$set(e.form.val,"stream",n)},expression:"form.val.stream"}},e._l(e.streams,(function(n,a){return r("a-select-option",{key:a,attrs:{value:n.key}},[e._v(e._s(n.name))])})),1)],1)],1)],1),r("a-form-item",{staticClass:"form-btn"},[r("a-button",{on:{click:function(n){return e.closeDetail(!1)}}},[e._v("取消")]),r("a-button",{attrs:{type:"primary",loading:e.form.confirmLoading},on:{click:function(n){return e.onSubmit("form")}}},[e._v("确定")])],1)],1)},t=[],o=r("f3f3"),l=(r("b0c0"),r("e25e"),r("d3b7"),r("5739")),i=function(e,n,r){/(^[1-9]\d*$)/.test(n)?r():r(new Error("请输入正整数"))},s={props:{currentInfo:{type:Object,required:!0}},data:function(){return{streams:[{key:1,name:"主码流"},{key:2,name:"子码流"}],spinning:!1,form:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}},confirmLoading:!1,val:{},rules:{nvr_channel:[{required:!0,message:"请输入通道编号",trigger:"blur"},{validator:i,trigger:"blur"}]}}}},watch:{"currentInfo.id":{handler:"resetForm",immediate:!0}},methods:{resetForm:function(e){var n=this;this.form.confirmLoading=!1,this.$nextTick((function(){n.$refs.form.clearValidate()})),this.currentInfo.isAdd?this.form.val={stream:1}:this.form.val=Object(o["a"])({},this.currentInfo.vcrCamera)},closeDetail:function(e){this.form.confirmLoading=!1,this.$emit("emitToParent",e)},onSubmit:function(e){var n=this;this.$refs[e].validate((function(e){if(e){n.form.confirmLoading=!0,null==n.form.val.stream&&(n.form.val.stream=1);var r=n.form.val,a=r.nvr_channel,t=r.name,o=r.stream,i=n.currentInfo.isAdd?l["b"]:l["h"],s=n.currentInfo.nvr_id,m={nvr_channel:parseInt(a),name:t,stream:o};n.updateInfo(i,m,s)}}))},updateInfo:function(e,n,r){var a=this;e(n,r).then((function(e){a.$message.success("数据提交成功！"),a.closeDetail(!0)}))["finally"]((function(){a.form.confirmLoading=!1}))}}},m=s,f=r("2877"),c=Object(f["a"])(m,a,t,!1,null,null,null);n["default"]=c.exports}}]);