(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6caaacde"],{4231:function(t,a,e){"use strict";e("9d4c")},4816:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"main-content"},[e("a-table",{attrs:{columns:t.columns,dataSource:t.pageData.records,rowKey:"id",loading:t.pageData.tableLoading,pagination:t.pagination},scopedSlots:t._u([{key:"duration",fn:function(a){return e("span",{},[t._v(" "+t._s(a?a+"秒":"")+" ")])}},{key:"url",fn:function(a){return e("span",{staticClass:"url"},[t._v(" "+t._s(a)+" ")])}},{key:"action",fn:function(a,n){return e("span",{},[e("a",{on:{click:function(a){return t.openLiveModal(n)}}},[t._v("播放")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:t.origin+n.file_path}},[t._v("下载")])],1)}}])}),e("a-modal",{attrs:{visible:t.modal.show,title:t.modal.title,footer:null,width:"830px",centered:"",destroyOnClose:""},on:{"update:visible":function(a){return t.$set(t.modal,"show",a)},cancel:function(a){t.modal.show=!1}}},[e("Player",{attrs:{"current-info":t.modal}})],1)],1)},i=[],o=e("f3f3"),r=(e("d3b7"),e("3ca3"),e("ddb0"),e("c1df")),c=e.n(r),s=e("abc2"),d=[{title:"开始时间",dataIndex:"event_time",width:200},{title:"时长",dataIndex:"duration",scopedSlots:{customRender:"duration"},width:120},{title:"视频地址",dataIndex:"file_path",scopedSlots:{customRender:"url"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},width:120}],l={components:{Player:function(){return Promise.all([e.e("flv.js"),e.e("chunk-b562abf0")]).then(e.bind(null,"ee76"))}},props:{queryParam:{type:Object,required:!0}},data:function(){var t=this;return{origin:location.origin+"/api/dvr/playback?path=",columns:d,pagination:{total:0,pageSize:10,current:1,onShowSizeChange:function(a,e){t.pagination.current=a,t.pagination.pageSize=e},onChange:function(a,e){t.pagination.current=a,t.pagination.pageSize=e},showSizeChanger:!0,showQuickJumper:!0},pageData:{tableLoading:!1,records:[]},modal:{show:!1,live:!1,title:"",url:"",bg:""}}},watch:{queryParam:{handler:"getVideoData",immediate:!0,deep:!0}},methods:{getVideoData:function(){if(!this.queryParam.device_id||!this.queryParam.time)return this.pageData.records=[],void(this.pagination.total=0);this.pagination.pageSize=10,this.pagination.current=1,this.getList()},formatTime:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";if(t)return c()(t).format(a)},getTimefrom:function(t,a){var e=c()(t),n=c()(a);return n.diff(c()(e),"seconds",!0)},getList:function(){var t=this;this.pageData.tableLoading=!0;var a=Object(o["a"])({desc:!0,size:this.pagination.pageSize,page:this.pagination.current},this.queryParam);a.time=this.formatTime(a.time||c()()),Object(s["l"])(a).then((function(a){t.pageData.records=a.records||[],t.pagination.total=a.records.length}))["finally"]((function(a){t.pageData.tableLoading=!1}))},openLiveModal:function(t){var a=t.event_time,e=t.file_path,n=location.origin+"/api/dvr/playback?path="+e;this.modal=Object(o["a"])(Object(o["a"])({},this.modal),{},{show:!0,url:n,title:a+" 视频文件"})}}},u=l,p=(e("4231"),e("2877")),h=Object(p["a"])(u,n,i,!1,null,"09df2900",null);a["default"]=h.exports},"9d4c":function(t,a,e){}}]);