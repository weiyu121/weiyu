(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6142f7ac"],{"2cd7":function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("div",[r("a-form-model",{ref:"form",staticClass:"form-box",attrs:{model:e.form.val,rules:e.form.rules,"label-col":e.form.labelCol,"wrapper-col":e.form.wrapperCol}},[r("a-form-model-item",{attrs:{label:"上网方式",prop:"type"}},[r("a-select",{attrs:{"show-search":"",placeholder:"请选择"},on:{change:e.handleTypeChange},model:{value:e.form.val.type,callback:function(a){e.$set(e.form.val,"type",a)},expression:"form.val.type"}},e._l(e.typeMap,(function(a,t){return r("a-select-option",{key:t,attrs:{value:t}},[e._v(e._s(a))])})),1)],1),r("a-spin",{attrs:{spinning:e.loading}},[r("a-form-model-item",{attrs:{label:"IP地址",prop:"address",rules:[{required:e.required,message:"不可为空",trigger:"blur"},{validator:e.ipCheck,trigger:"blur"}]}},[r("a-input",{attrs:{disabled:1==e.form.val.type,placeholder:"请输入"},model:{value:e.form.val.address,callback:function(a){e.$set(e.form.val,"address",a)},expression:"form.val.address"}})],1),r("a-form-model-item",{attrs:{label:"子网掩码",prop:"netmask",rules:[{required:e.required,message:"不可为空",trigger:"blur"},{validator:e.ipCheck,trigger:"blur"}]}},[r("a-input",{attrs:{disabled:1==e.form.val.type,placeholder:"请输入"},model:{value:e.form.val.netmask,callback:function(a){e.$set(e.form.val,"netmask",a)},expression:"form.val.netmask"}})],1),r("a-form-model-item",{attrs:{label:"网关",prop:"gateway",rules:[{required:e.required,message:"不可为空",trigger:"blur"},{validator:e.ipCheck,trigger:"blur"}]}},[r("a-input",{attrs:{disabled:1==e.form.val.type,placeholder:"请输入"},model:{value:e.form.val.gateway,callback:function(a){e.$set(e.form.val,"gateway",a)},expression:"form.val.gateway"}})],1),r("a-form-model-item",{attrs:{label:"DNS服务器",prop:"dns",rules:[{validator:e.ipCheck,trigger:"blur"}]}},[r("a-input",{attrs:{disabled:1==e.form.val.type,placeholder:"请输入"},model:{value:e.form.val.dns,callback:function(a){e.$set(e.form.val,"dns",a)},expression:"form.val.dns"}})],1),r("a-form-model-item",{attrs:{wrapperCol:{span:19,offset:5}}},[r("a-button",{attrs:{type:"primary",loading:e.form.confirmLoading},on:{click:function(a){return e.onSubmit("form")}}},[e._v("确定")])],1)],1)],1)],1)},o=[],l=r("f3f3"),n=(r("d3b7"),r("7b0a")),s=r("8593"),i={0:"固定IP",1:"自动获取"},d={data:function(){var e=function(e,a,r){if(a&&!Object(n["a"])(a))return r(new Error("请检查 IP 格式")),!1;r()};return{ipCheck:e,typeMap:i,loading:!1,form:{labelCol:{span:5},wrapperCol:{span:19},confirmLoading:!1,val:{type:"0"},rules:{type:[{required:!0,message:"不可为空",trigger:"change"}],dns:[{validator:e,trigger:"blur"}]}}}},computed:{required:function(){return this.form&&this.form.val&&"0"===this.form.val.type}},activated:function(){this.getInfo(!0)},methods:{getInfo:function(e){var a=this;this.loading=!0,Object(s["g"])().then((function(r){var t=r.address,o=r.gateway,n=r.netmask,s=r.ipv4;a.form.val=Object(l["a"])(Object(l["a"])({},a.form.val),{},{address:t,gateway:o,netmask:n}),e&&(a.form.val.type=s?"0":"1")}))["finally"]((function(){a.loading=!1}))},handleTypeChange:function(e){"1"===e&&this.getInfo()},onSubmit:function(e){var a=this;this.$refs[e].validate((function(e){if(e){a.form.confirmLoading=!0;var r=a.form.val,t=r.type,o=r.address,l=r.gateway,n=r.netmask,i={ipv4:"1"===t?null:{address:o,gateway:l,netmask:n}};Object(s["z"])(i).then((function(){a.$message.success("设置成功!")}))["finally"]((function(){a.form.confirmLoading=!1}))}}))}}},f=d,m=(r("8f38"),r("2877")),c=Object(m["a"])(f,t,o,!1,null,"38efa63c",null);a["default"]=c.exports},"7b0a":function(e,a,r){"use strict";function t(e){var a=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return a.test(e)}r.d(a,"a",(function(){return t}))},"8f38":function(e,a,r){"use strict";r("bacc")},bacc:function(e,a,r){}}]);