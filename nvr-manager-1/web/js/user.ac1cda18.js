(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"11d1":function(t,e,s){"use strict";s("91e7")},1348:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("a-form-model",{ref:"form",attrs:{model:t.form.val,rules:t.form.rules,"wrapper-col":{span:10,offset:9}}},[s("a-form-model-item",{attrs:{prop:"password"}},[s("a-input",{staticClass:"password",attrs:{placeholder:"密码",type:"password"},model:{value:t.form.val.password,callback:function(e){t.$set(t.form.val,"password",e)},expression:"form.val.password"}},[s("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-model-item",{attrs:{prop:"repassword"}},[s("a-input",{staticClass:"password",attrs:{placeholder:"确认密码",type:"password",id:"password"},model:{value:t.form.val.repassword,callback:function(e){t.$set(t.form.val,"repassword",e)},expression:"form.val.repassword"}},[s("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"}),s("template",{slot:"suffix"},[t.show?s("a-icon",{attrs:{type:"eye"},on:{click:function(e){return t.handleVisible(0)}}}):s("a-icon",{attrs:{type:"eye-invisible"},on:{click:function(e){return t.handleVisible(1)}}})],1)],2)],1),s("a-form-model-item",[s("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.savePassword.apply(null,arguments)}}},[t._v("保存密码 ")]),s("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.linkToLogin.apply(null,arguments)}}},[t._v("去登录 ")])],1)],1)],1)},o=[],a=(s("498a"),s("7ded")),n=function(t,e,s){""===e&&s(new Error("请输入密码")),s()},i={data:function(){var t=this,e=function(e,s,r){var o=t.form.val.password;if(s&&o&&s.trim()!==o.trim())return r(new Error("两次密码不一致"));r()};return{show:!1,form:{val:{},rules:{password:[{required:!0,message:"密码不可为空",trigger:"blur"},{validator:n,trigger:"blur"}],repassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:e,trigger:"blur"}]}}}},methods:{handleVisible:function(t){var e=document.getElementById("password");1===t?(this.show=!0,e.setAttribute("type","text")):(this.show=!1,e.setAttribute("type","password"))},savePassword:function(){var t=this,e=this.form.val.password;Object(a["i"])({password:e}).then((function(e){0===e.code&&(t.$store.commit("SET_HAS_PASSWORD"),t.$message.success("密码设置成功"))}))},linkToLogin:function(){this.$router.push({path:"/user/login"})}}},l=i,u=(s("8a2b"),s("2877")),c=Object(u["a"])(l,r,o,!1,null,"d7f0efda",null);e["default"]=c.exports},"19a7":function(t,e,s){},"8a02":function(t,e,s){"use strict";s("ddfc")},"8a2b":function(t,e,s){"use strict";s("19a7")},"91e7":function(t,e,s){},a2cd:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("a-form",{attrs:{form:t.form,"wrapper-col":{span:10,offset:9}}},[s("a-form-item",{attrs:{prop:"question",required:!0}},[s("a-select",{staticClass:"password",attrs:{placeholder:"请选择密保问题"},model:{value:t.form.val.id,callback:function(e){t.$set(t.form.val,"id",e)},expression:"form.val.id"}},t._l(t.questions,(function(e){return s("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.question))])})),1)],1),s("a-form-item",{attrs:{prop:"回答",required:!0}},[s("a-input",{staticClass:"password",attrs:{placeholder:"请输入回答"},model:{value:t.form.val.answer,callback:function(e){t.$set(t.form.val,"answer",e)},expression:"form.val.answer"}})],1),s("a-form-item",{attrs:{prop:"回答",required:!0}},[s("a-input",{staticClass:"password",attrs:{placeholder:"请输入新密码"},model:{value:t.form.val.password,callback:function(e){t.$set(t.form.val,"password",e)},expression:"form.val.password"}})],1),s("a-form-item",[s("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyDown.apply(null,arguments)}}},[t._v("确定")])],1)],1)],1)},o=[],a=s("f3f3"),n=s("7ded"),i=s("2f62"),l={data:function(){return{show:!1,form:{val:{}},questions:[]}},created:function(){this.getPwdQ()},mounted:function(){window.addEventListener("keydown",this.keyDown)},destroyed:function(){window.removeEventListener("keydown",this.keyDown,!1)},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["Login"])),{},{getPwdQ:function(){var t=this;Object(n["e"])().then((function(e){t.questions=e.questions||[]}))},keyDown:function(t){13===t.keyCode&&this.handleSubmit()},handleSubmit:function(){var t=this,e=this.form.val,s=e.password,r=e.id,o=e.answer,a={password:s,auth:{by_question:{id:r,answer:o}}};Object(n["b"])(a).then((function(e){0===e.code?(t.$message.success("修改成功!"),t.$router.push({path:"/dashboard"})):t.$message.error("回答错误!")}))}})},u=l,c=(s("11d1"),s("2877")),d=Object(c["a"])(u,r,o,!1,null,"3e4c9884",null);e["default"]=d.exports},ac2a:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("a-form",{attrs:{form:t.form,"wrapper-col":{span:10,offset:9}}},[s("a-form-item",{attrs:{prop:"password",required:!0}},[s("a-input",{staticClass:"password",attrs:{placeholder:"密码",type:"password",id:"password"},model:{value:t.form.val.password,callback:function(e){t.$set(t.form.val,"password",e)},expression:"form.val.password"}},[s("a-icon",{attrs:{slot:"prefix",type:"lock"},slot:"prefix"}),s("template",{slot:"suffix"},[t.show?s("a-icon",{attrs:{type:"eye"},on:{click:function(e){return t.handleVisible(0)}}}):s("a-icon",{attrs:{type:"eye-invisible"},on:{click:function(e){return t.handleVisible(1)}}})],1)],2)],1),s("a-form-item",[s("a-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyDown.apply(null,arguments)}}},[t._v(" 登录 ")]),s("p",{staticStyle:{width:"60%"}},[s("a",{staticStyle:{color:"aliceblue",float:"right","margin-top":"-3%"},on:{click:t.linkToFPwd}},[t._v("忘记密码")])])],1)],1)],1)},o=[],a=s("f3f3"),n=s("7ded"),i=s("2f62"),l={data:function(){return{show:!1,form:{val:{}}}},mounted:function(){window.addEventListener("keydown",this.keyDown)},destroyed:function(){window.removeEventListener("keydown",this.keyDown,!1)},methods:Object(a["a"])(Object(a["a"])({},Object(i["b"])(["Login"])),{},{linkToFPwd:function(){this.$router.push({path:"/user/forgetPwd"})},keyDown:function(t){13===t.keyCode&&this.handleSubmit()},handleVisible:function(t){var e=document.getElementById("password");1===t?(this.show=!0,e.setAttribute("type","text")):(this.show=!1,e.setAttribute("type","password"))},handleSubmit:function(){var t=this,e={password:this.form.val.password};Object(n["f"])(e).then((function(e){0===e.code||904===e.code?(t.Login({password:t.form.val.password}),t.$router.push({path:"/dashboard"})):901===e.code&&t.$router.push({path:"/user/password"})}))}})},u=l,c=(s("8a02"),s("2877")),d=Object(c["a"])(u,r,o,!1,null,"23bc773e",null);e["default"]=d.exports},ddfc:function(t,e,s){}}]);